@model WeddingPlanning.Models.Guests
<div>
    @if (Model.AllGuests.Count() > 0)
    {
        <h3>Guests that you've already added</h3>
    <table class="table table-hover table-striped">
        <thead class="thead-inverse">
            <tr>
                <th>First Name</th>
                <th>Surname</th>
                <th>Allergies</th>
                <th>Under 12</th>
                <th>Under 5</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        @foreach (var guest in Model.AllGuests)
        {
            <tr>
                <td scope="row">
                    @guest.FirstName
                </td>
                <td>
                    @guest.Surname
                </td>
                <td>
                    @guest.Allergies
                </td>
                <td>
                    @if (guest.AgeGroup == WeddingPlanning.Models.AgeGroup.Child)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                </td>
                <td>
                    @if (guest.AgeGroup == WeddingPlanning.Models.AgeGroup.Baby)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                </td>
                <td>
                    <a id="@guest.Id" href="#" class="btn btn-primary editGuest" data-toggle="modal" data-target="#editGuest"><span class="fa fa-trash">Edit</span></a>
                </td>
                <td>
                    <a href="/RSVP/RemoveGuest?id=@guest.Id" class="btn btn-danger"><span class="fa fa-trash">Remove</span></a>
                </td>
            </tr>
        }
        </tbody>
    </table>
    <script>
                        //$('#editGuestButton').click(function (e) {
                        //    e.preventDefault();
                        //    $('#editGuest').load();
                        //});
                        $(".editGuest").each(function (_, e) {
                            $(e).on('click', function () {
                                populateForm(e.id);
                            });
                        })

                        //var isH = function (h) {
                        //    return 
                        //}

                        var populateForm = function (button) {
                            $.ajax({
                                url: "/RSVP/EditGuest",
                                data:{
                                    guestId: button
                                },
                                success: function (d, y, z) {
                                    var data = $(d);
                                    var header = $(data[0]).text(); //data.find(function (h) { return $(h).is('h4') })[0];

                                    $('.modal-title').text(header);

                                    $('#modal-content').html(data[2]);
                                    //$('#modal-content').html(data);
                                },
                                error: function(x, y, z){
                                    console.log("whoops");
                                }
                            })
                        }

    </script>
    <!--
    <style>
        .btn {
            background-color: #002366;
            border-color: #002366;
            color: white;
        }
        .btn:hover{
            background-color: turquoise;
            border-color: turquoise;
            color:black;
        }
        .modal-body > form {
            display: inline-block;
        }
        .modal {
            background-color: #fff;
            top: 25%;
            left: 25%;
            right: 25%;
            bottom: inherit;
            overflow-y: auto;
            border-radius: 10px;
        }
        .modal-header{
            border-bottom: 0;
        }
        .modal-footer{
            border-top: 0;
        }
    </style>
        -->
    }
</div>
<div class="modal fade" id="editGuest" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">An excellent title.</h4>
            </div>
            <div class="modal-body" id="modal-content">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <!--<button type="button" class="btn btn-primary">Save changes</button>-->
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
